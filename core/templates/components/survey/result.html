{% load static %}

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.2/html2canvas.min.js"></script>
<script src="{% static 'js/download-survey-result.js' %}"></script>

<div style="max-width: 780px;" class="w-full flex flex-col">
  <table class="table table-striped w-full">
    <thead>
      <tr>
        <th style="vertical-align: middle" scope="col" class="bg-primary text-white text-center">Бактери нэршил</th>
        {% for columns in result_data.0.keys %}
          {% if columns == 'CNN' %}
            <th style="vertical-align: middle" scope="col" class="bg-primary text-white text-center">Илэрсэн хувь (CNN)</th>
          {% elif columns == 'SVM'  %}
            <th style="vertical-align: middle" scope="col" class="bg-primary text-white text-center">Илэрсэн хувь (SVM)</th>
          {% elif columns == 'RNN'  %}
            <th style="vertical-align: middle" scope="col" class="bg-primary text-white text-center">Илэрсэн хувь (RNN)</th>
          {% endif  %}
        {% endfor %}
      </tr>
    </thead>
    <tbody>
      {% for row in result_data %}
        <tr>
          <td class="text-center">
            <div class="d-flex justify-content-center gap-2 align-items-center">
              {{ row.bacteria }}
              <img style="height: 45px; object-fit: contain;" src="{% static 'images/bacteria/' %}{{row.bacteria}}.png" alt="{{ row.bacteria }}">
            </div>
          </td>
          {% for columns in result_data.0.keys %}
            {% if columns == 'CNN' %}
              <td class="text-center">
                <div class="d-flex justify-content-center gap-2 align-items-center" style="height: 45px">{{ row.CNN }}</div>
              </td>
            {% elif columns == 'SVM'  %}
              <td class="text-center">
                <div class="d-flex justify-content-center gap-2 align-items-center" style="height: 45px">{{ row.SVM }}</div>
              </td>
            {% elif columns == 'RNN'  %}
              <td class="text-center">
                <div class="d-flex justify-content-center gap-2 align-items-center" style="height: 45px">{{ row.RNN }}</div>
              </td>
            {% endif  %}
          {% endfor %}
        </tr>
      {% endfor %}
    </tbody>
  </table>
  <button id="loadingButton" class="btn button bg-primary" type="submit" onclick="downloadPdf('{{ request.GET.id|urlencode }}')">
    <a class="h-full text-white" href="#">
      <i class="fas fa-file-pdf text-lg me-1"></i>Шинжилгээний хариу татах
    </a>
  </button>
  <div class="result-chart">
    {% include 'charts/bar-chart.html' %}
  </div>
</div>
<div id="hiddenContainer" style="max-width: 1280px; width: 100%"></div>