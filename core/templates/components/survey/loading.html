{% load static %}

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
  checkForResult = () => {
    $.ajax({
      url: '/survey/check-result/{{ survey_file_name }}',
      success: (response) => {
        const resultFileName = response.result_file_name
        if (resultFileName) {
          clearInterval(pollingInterval);
          const currentUrl = window.location.href
          const baseUrl = currentUrl.split('/survey/')[0]
          const newUrl = baseUrl + '/survey/result/?file_name=' + resultFileName
          window.location.href = newUrl
        }
      },
      error: (error) => { console.error('Error:', error)}
    })
  }
  var pollingInterval = setInterval(checkForResult, 5000);
</script>

<div style="padding: 20px;">
  <div id="radar-animation" class="jt-relative jt-w-full jt-aspect-[4/3] jt-flex jt-justify-center snipcss-g7Gk8">
    <div class="jt-relative jt-h-full jt-aspect-square">
      <div class="jt-absolute jt-overflow-hidden jt-left-0 jt-top-0 jt-h-full jt-w-full jt-rounded-full">
        <div class="jt-absolute jt-left-[20%] jt-top-[20%] jt-w-[10%] jt-h-[10%] jt-ring-2 jt-ring-neo-500 jt-rounded-full">
        </div>
        <div class="jt-absolute jt-left-[35%] jt-top-[5%] jt-w-[10%] jt-h-[10%] jt-ring-2 jt-ring-neo-500 jt-rounded-full">
        </div>
        <div class="jt-absolute jt-left-[50%] jt-top-[25%] jt-w-[10%] jt-h-[10%] jt-ring-2 jt-ring-neo-500 jt-rounded-full">
        </div>
        <div class="jt-absolute jt-left-[75%] jt-top-[20%] jt-w-[10%] jt-h-[10%] jt-ring-2 jt-ring-neo-500 jt-rounded-full">
        </div>
        <div class="jt-absolute jt-left-[70%] jt-top-[40%] jt-w-[10%] jt-h-[10%] jt-ring-2 jt-ring-neo-500 jt-rounded-full">
        </div>
        <div class="jt-absolute jt-left-[80%] jt-top-[60%] jt-w-[10%] jt-h-[10%] jt-ring-2 jt-ring-neo-500 jt-rounded-full">
        </div>
        <div class="jt-absolute jt-left-[65%] jt-top-[80%] jt-w-[10%] jt-h-[10%] jt-ring-2 jt-ring-neo-500 jt-rounded-full">
        </div>
        <div class="jt-absolute jt-left-[45%] jt-top-[70%] jt-w-[10%] jt-h-[10%] jt-ring-2 jt-ring-neo-500 jt-rounded-full">
        </div>
        <div class="jt-absolute jt-left-[25%] jt-top-[80%] jt-w-[10%] jt-h-[10%] jt-ring-2 jt-ring-neo-500 jt-rounded-full">
        </div>
        <div class="jt-absolute jt-left-[25%] jt-top-[55%] jt-w-[10%] jt-h-[10%] jt-ring-2 jt-ring-neo-500 jt-rounded-full">
        </div>
        <div class="jt-absolute jt-left-[5%] jt-top-[45%] jt-w-[10%] jt-h-[10%] jt-ring-2 jt-ring-neo-500 jt-rounded-full">
        </div>
        <svg class="jt-absolute jt-left-0 jt-top-0 jt-w-full jt-h-full jt-stroke-[1] jt-stroke-neo-500" viewBox="0 0 100 100">
          <line x1="25%" y1="25%" x2="40%" y2="10%">
          </line>
          <line x1="25%" y1="25%" x2="55%" y2="30%">
          </line>
          <line x1="40%" y1="10%" x2="55%" y2="30%">
          </line>
          <line x1="55%" y1="30%" x2="75%" y2="45%">
          </line>
          <line x1="80%" y1="25%" x2="75%" y2="45%">
          </line>
          <line x1="75%" y1="45%" x2="85%" y2="65%">
          </line>
          <line x1="75%" y1="45%" x2="70%" y2="85%">
          </line>
          <line x1="85%" y1="65%" x2="70%" y2="85%">
          </line>
          <line x1="70%" y1="85%" x2="50%" y2="75%">
          </line>
          <line x1="50%" y1="75%" x2="30%" y2="85%">
          </line>
          <line x1="50%" y1="75%" x2="30%" y2="60%">
          </line>
          <line x1="30%" y1="85%" x2="30%" y2="60%">
          </line>
          <line x1="30%" y1="60%" x2="10%" y2="50%">
          </line>
          <line x1="10%" y1="50%" x2="25%" y2="25%">
          </line>
          <line x1="25%" y1="25%" x2="5%" y2="17%">
          </line>
          <line x1="80%" y1="25%" x2="95%" y2="13%">
          </line>
          <line x1="85%" y1="65%" x2="101%" y2="95%">
          </line>
          <line x1="70%" y1="85%" x2="101%" y2="95%">
          </line>
          <line x1="30%" y1="85%" x2="10%" y2="88%">
          </line>
        </svg>
        <svg class="jt-absolute jt-left-0 jt-top-0 jt-w-full jt-h-full jt-fill-white jt-animate-spin-slow" viewBox="0 0 100 100">
          <polygon points="0,100 50,50 100,100">
          </polygon>
        </svg>
        <div class="jt-absolute jt-left-[20%] jt-top-[20%] jt-w-[10%] jt-h-[10%] jt-bg-white jt-rounded-full">
          <div class="jt-absolute jt-left-[15%] jt-top-[15%] jt-w-[70%] jt-h-[70%] jt-bg-neo-500 jt-rounded-full">
          </div>
        </div>
        <div class="jt-absolute jt-left-[35%] jt-top-[5%] jt-w-[10%] jt-h-[10%] jt-bg-white jt-rounded-full">
          <div class="jt-absolute jt-left-[15%] jt-top-[15%] jt-w-[70%] jt-h-[70%] jt-bg-neo-500 jt-rounded-full">
          </div>
        </div>
        <div class="jt-absolute jt-left-[50%] jt-top-[25%] jt-w-[10%] jt-h-[10%] jt-bg-white jt-rounded-full">
          <div class="jt-absolute jt-left-[15%] jt-top-[15%] jt-w-[70%] jt-h-[70%] jt-bg-neo-500 jt-rounded-full">
          </div>
        </div>
        <div class="jt-absolute jt-left-[75%] jt-top-[20%] jt-w-[10%] jt-h-[10%] jt-bg-white jt-rounded-full">
          <div class="jt-absolute jt-left-[15%] jt-top-[15%] jt-w-[70%] jt-h-[70%] jt-bg-neo-500 jt-rounded-full">
          </div>
        </div>
        <div class="jt-absolute jt-left-[70%] jt-top-[40%] jt-w-[10%] jt-h-[10%] jt-bg-white jt-rounded-full">
          <div class="jt-absolute jt-left-[15%] jt-top-[15%] jt-w-[70%] jt-h-[70%] jt-bg-neo-500 jt-rounded-full">
          </div>
        </div>
        <div class="jt-absolute jt-left-[80%] jt-top-[60%] jt-w-[10%] jt-h-[10%] jt-bg-white jt-rounded-full">
          <div class="jt-absolute jt-left-[15%] jt-top-[15%] jt-w-[70%] jt-h-[70%] jt-bg-neo-500 jt-rounded-full">
          </div>
        </div>
        <div class="jt-absolute jt-left-[65%] jt-top-[80%] jt-w-[10%] jt-h-[10%] jt-bg-white jt-rounded-full">
          <div class="jt-absolute jt-left-[15%] jt-top-[15%] jt-w-[70%] jt-h-[70%] jt-bg-neo-500 jt-rounded-full">
          </div>
        </div>
        <div class="jt-absolute jt-left-[45%] jt-top-[70%] jt-w-[10%] jt-h-[10%] jt-bg-white jt-rounded-full">
          <div class="jt-absolute jt-left-[15%] jt-top-[15%] jt-w-[70%] jt-h-[70%] jt-bg-neo-500 jt-rounded-full">
          </div>
        </div>
        <div class="jt-absolute jt-left-[25%] jt-top-[80%] jt-w-[10%] jt-h-[10%] jt-bg-white jt-rounded-full">
          <div class="jt-absolute jt-left-[15%] jt-top-[15%] jt-w-[70%] jt-h-[70%] jt-bg-neo-500 jt-rounded-full">
          </div>
        </div>
        <div class="jt-absolute jt-left-[25%] jt-top-[55%] jt-w-[10%] jt-h-[10%] jt-bg-white jt-rounded-full">
          <div class="jt-absolute jt-left-[15%] jt-top-[15%] jt-w-[70%] jt-h-[70%] jt-bg-neo-500 jt-rounded-full">
          </div>
        </div>
        <div class="jt-absolute jt-left-[5%] jt-top-[45%] jt-w-[10%] jt-h-[10%] jt-bg-white jt-rounded-full">
          <div class="jt-absolute jt-left-[15%] jt-top-[15%] jt-w-[70%] jt-h-[70%] jt-bg-neo-500 jt-rounded-full">
          </div>
        </div>
        <div class="jt-absolute jt-left-0 jt-top-0 jt-h-full jt-w-full jt-border-neo-500 jt-border-2 jt-rounded-full">
        </div>
        <svg class="jt-absolute jt-left-0 jt-top-0 jt-w-full jt-h-full jt-fill-transparent jt-stroke-neo-500 jt-stroke-[1] jt-animate-spin-slow" viewBox="0 0 100 100">
          <line x1="50%" y1="50%" x2="100%" y2="100%">
          </line>
        </svg>
        <svg class="jt-absolute jt-left-0 jt-top-0 jt-w-full jt-h-full jt-fill-neo-500 jt-animate-spin-slow" viewBox="0 0 100 100">
          <path d="M 81.643 81.643 A 45.25 45.25 0 0 0 87.075 75.950 A 45.25 45.25 0 0 1 82.350 82.350">
          </path>
          <path d="M 78.284 78.284 A 40.5 40.5 0 0 0 83.188 73.218 A 40.5 40.5 0 0 1 78.991 78.991">
          </path>
          <path d="M 74.926 74.926 A 35.75 35.75 0 0 0 79.301 70.487 A 35.75 35.75 0 0 1 75.632 75.632">
          </path>
          <path d="M 71.557 71.557 A 31 31 0 0 0 75.415 67.755 A 31 31 0 0 1 72.274 72.274">
          </path>
          <path d="M 68.208 68.208 A 25.55 25.55 0 0 0 71.528 65.024 A 25.55 25.55 0 0 1 68.916 68.916">
          </path>
          <path d="M 64.849 64.849 A 21.5 21.5 0 0 0 67.641 62.293 A 21.5 21.5 0 0 1 65.556 65.556">
          </path>
          <path d="M 61.491 61.491 A 16.75 16.75 0 0 0 63.755 59.561 A 16.75 16.75 0 0 1 62.198 62.198">
          </path>
        </svg>
        <div class="jt-absolute jt-left-[38%] jt-top-[38%] jt-h-[24%] jt-w-[24%] jt-bg-neo-500 jt-rounded-full">
          <svg class="jt-absolute jt-left-[18%] jt-top-[18%] jt-w-full jt-h-full jt-fill-white" viewBox="0 0 100 100">
            <path d="M20.65,53.14v11.3c0,.76-.62,1.38-1.38,1.38s-1.38-.62-1.38-1.38v-11.3c0-.76,.62-1.38,1.38-1.38s1.38,.62,1.38,1.38Zm42.13-17.55l-7.48-12.68c.32-1.91,1.33-10.19-3.66-16.32C48.07,2.23,42.32,.01,34.54,.01c-.55,0-1,.45-1,1s.45,1,1,1c7.14,0,12.37,1.96,15.53,5.84,4.96,6.08,3.21,14.96,3.19,15.05l-.08,.38,7.86,13.33c.08,.13,.12,.29,.12,.45,0,.23-.09,.46-.26,.62s-.39,.26-.62,.26h-3.11c-1.02,.05-1.84,.86-1.9,1.94v7c0,2.9-3.52,6-6,6h-5.67c-1.07,0-1.94,.87-1.94,1.94v9.27c0,.55,.45,1,1,1s1-.45,1-1l-.05-9.21h5.66c3.49,0,8-3.88,8-8l-.05-6.94h3.07c.76,0,1.48-.3,2.03-.83,.55-.54,.85-1.26,.85-2.03,0-.52-.13-1.02-.4-1.47Zm-20.87-.19c-1.2,2.1-3.8,3.2-7.45,3.2-.83,0-1.72-.06-2.66-.17-.69-.09-1.4-.21-2.12-.35-1.91,5.59-4.93,9.14-8.39,9.14s-6.5-3.57-8.41-9.2c-1.67,.33-3.26,.52-4.69,.52-3.58,0-6.28-1.04-7.5-3.18-1.47-2.58-.58-6.21,2.52-10.24,.39-.51,.82-1.01,1.26-1.52C.59,19.18-1,14.83,.7,11.86c1.71-3,6.34-3.82,12.19-2.67C14.8,3.57,17.82,0,21.29,0s6.48,3.55,8.39,9.14c.72-.14,1.43-.27,2.11-.35,5.05-.62,8.63,.45,10.1,3.03,1.71,2.99,.09,7.36-3.83,11.79,3.93,4.44,5.54,8.81,3.84,11.8ZM30.27,11.06c.56,2.04,.99,4.3,1.26,6.71,1.96,1.42,3.69,2.91,5.18,4.4,3.36-3.83,4.61-7.34,3.45-9.36-.82-1.43-2.85-2.19-5.71-2.19-.75,0-1.56,.05-2.41,.16-.58,.07-1.17,.17-1.77,.28Zm-.64,17.31c.14-1.51,.21-3.09,.21-4.75s-.08-3.25-.21-4.76c-1.27-.89-2.64-1.76-4.11-2.6-1.45-.83-2.87-1.55-4.26-2.19-1.39,.64-2.79,1.35-4.18,2.15-1.45,.83-2.82,1.71-4.12,2.62-.14,1.52-.21,3.11-.21,4.78s.08,3.27,.21,4.79c1.27,.89,2.65,1.77,4.13,2.61,1.39,.79,2.78,1.5,4.18,2.14,1.38-.64,2.81-1.36,4.25-2.19,1.48-.84,2.85-1.72,4.12-2.61Zm-3.13,4.34c-.94,.54-1.87,1.03-2.8,1.49,1.58,.62,3.13,1.14,4.63,1.53,.4-1.45,.73-3.03,.99-4.75-.91,.59-1.84,1.17-2.81,1.73Zm-10.41,.05c-.98-.56-1.91-1.14-2.82-1.74,.25,1.69,.58,3.25,.97,4.68,1.44-.37,2.97-.87,4.57-1.5-.91-.45-1.82-.93-2.72-1.44Zm-5.35-9.14c0-1.09,.03-2.16,.1-3.21-1.33,1.04-2.55,2.12-3.64,3.21,1.06,1.07,2.28,2.14,3.64,3.21-.06-1.05-.1-2.12-.1-3.22Zm5.34-9.14c.9-.52,1.81-.99,2.72-1.45-1.6-.63-3.12-1.12-4.56-1.5-.39,1.43-.72,2.99-.97,4.68,.91-.6,1.84-1.18,2.81-1.73Zm10.42,.05c.98,.56,1.9,1.14,2.81,1.73-.25-1.71-.58-3.3-.99-4.75-1.5,.39-3.05,.91-4.63,1.53,.93,.46,1.87,.95,2.81,1.49Zm5.33,9.09c0,1.08-.03,2.14-.09,3.18,1.35-1.06,2.56-2.13,3.61-3.18-1.05-1.05-2.26-2.12-3.61-3.18,.06,1.04,.09,2.1,.09,3.18ZM14.83,9.64c2.04,.53,4.2,1.28,6.42,2.25,2.21-.97,4.4-1.74,6.5-2.29-1.67-4.79-4.11-7.59-6.45-7.59s-4.8,2.82-6.47,7.64ZM5.83,22.16c1.52-1.53,3.29-3.02,5.23-4.43,.26-2.39,.69-4.62,1.24-6.64-5.03-.96-8.71-.26-9.87,1.77-1.15,2.02,.08,5.5,3.4,9.31Zm6.47,13.98c-.56-2.02-.98-4.26-1.24-6.65-1.97-1.43-3.71-2.92-5.21-4.43-.37,.42-.72,.85-1.05,1.28-2.54,3.3-3.4,6.23-2.37,8.03,1.16,2.03,4.84,2.73,9.88,1.77Zm15.44,1.49c-2.1-.55-4.28-1.32-6.49-2.29-2.22,.97-4.38,1.71-6.43,2.25,1.67,4.81,4.11,7.64,6.47,7.64s4.78-2.81,6.45-7.59Zm8.97-12.58c-1.49,1.49-3.23,2.97-5.18,4.4-.27,2.42-.69,4.67-1.26,6.72,.6,.12,1.2,.21,1.77,.28,4.13,.51,7.09-.23,8.12-2.03,1.16-2.03-.09-5.53-3.46-9.37Zm-15.42-3.92c-1.37,0-2.49,1.11-2.49,2.48s1.12,2.48,2.49,2.48,2.49-1.11,2.49-2.48-1.12-2.48-2.49-2.48Z">
            </path>
          </svg>
        </div>
      </div>
    </div>
    <div class="jt-absolute jt-left-[1%] jt-top-[5%] jt-h-[7%] jt-aspect-square jt-bg-neo-200 jt-rounded-full">
    </div>
    <div class="jt-absolute jt-left-[90%] jt-top-[0%] jt-h-[7%] jt-aspect-square jt-bg-neo-200 jt-rounded-full">
    </div>
    <div class="jt-absolute jt-left-[85%] jt-top-[90%] jt-h-[7%] jt-aspect-square jt-bg-neo-200 jt-rounded-full">
    </div>
    <div class="jt-absolute jt-left-[5%] jt-top-[85%] jt-h-[7%] jt-aspect-square jt-bg-neo-200 jt-rounded-full">
    </div>
    <div class="jt-absolute jt-left-[0%] jt-top-[40%] jt-h-[7%] jt-aspect-square jt-bg-neo-200 jt-rounded-full">
    </div>
    <div class="jt-absolute jt-left-[93%] jt-top-[55%] jt-h-[7%] jt-aspect-square jt-bg-neo-200 jt-rounded-full">
    </div>
  </div>
</div>

<style>
.progress-bar-img {
  top: 0;
  height: 100%;
  padding-top: 5px;
  padding-bottom: 5px;
}

.progress-bar-img:nth-child(1) { left: 10px !important; }
.progress-bar-img:nth-child(2) { left: 20px !important; }
.progress-bar-img:nth-child(3) { left: 35px !important; }
.progress-bar-img:nth-child(4) { left: 50px !important; }
.progress-bar-img:nth-child(5) { left: 65px !important; }
.progress-bar-img:nth-child(6) { left: 80px !important; }
.progress-bar-img:nth-child(7) { left: 95px !important; }
.progress-bar-img:nth-child(8) { left: 110px !important; }
.progress-bar-img:nth-child(9) { left: 125px !important; }
.progress-bar-img:nth-child(10) { left: 140px !important; }
.progress-bar-img:nth-child(11) { left: 155px !important; }
.progress-bar-img:nth-child(12) { left: 170px !important; }
.progress-bar-img:nth-child(13) { left: 185px !important; }
.progress-bar-img:nth-child(14) { left: 200px !important; }
.progress-bar-img:nth-child(15) { left: 215px !important; }
.progress-bar-img:nth-child(16) { left: 230px !important; }
.progress-bar-img:nth-child(17) { left: 245px !important; }
.progress-bar-img:nth-child(18) { left: 260px !important; }
.progress-bar-img:nth-child(19) { left: 275px !important; }
.progress-bar-img:nth-child(20) { left: 290px !important; }
.progress-bar-img:nth-child(21) { left: 305px !important; }
.progress-bar-img:nth-child(22) { left: 320px !important; }
.progress-bar-img:nth-child(23) { left: 335px !important; }
.progress-bar-img:nth-child(24) { left: 350px !important; }
.progress-bar-img:nth-child(25) { left: 365px !important; }
</style>

<div style="display: flex; justify-content: center;">
  <div style="position: relative; height: 50px; width: 300px; border-color: #003376; border-width: 4px; border-radius: 10px; padding-left: 5px; padding-right: 5px;">
    <img class="progress-bar-img" src="{% static 'images/progress1.png' %}">
    <img class="progress-bar-img" src="{% static 'images/progress1.png' %}">
    <img class="progress-bar-img" src="{% static 'images/progress1.png' %}">
    <img class="progress-bar-img" src="{% static 'images/progress1.png' %}">
    <img class="progress-bar-img" src="{% static 'images/progress1.png' %}">
    <img class="progress-bar-img" src="{% static 'images/progress1.png' %}">
    <img class="progress-bar-img" src="{% static 'images/progress1.png' %}">
    <img class="progress-bar-img" src="{% static 'images/progress1.png' %}">
    <img class="progress-bar-img" src="{% static 'images/progress1.png' %}">
    <img class="progress-bar-img" src="{% static 'images/progress1.png' %}">
    <img class="progress-bar-img" src="{% static 'images/progress1.png' %}">
    <img class="progress-bar-img" src="{% static 'images/progress1.png' %}">
    <img class="progress-bar-img" src="{% static 'images/progress1.png' %}">
    <img class="progress-bar-img" src="{% static 'images/progress1.png' %}">
    <img class="progress-bar-img" src="{% static 'images/progress1.png' %}">
  </div>
</div>

<script>
function changeImages() {
  const images = document.querySelectorAll('.progress-bar-img');
  const totalDuration = 3000;
  let delay = 0;
  const delayIncrement = totalDuration / images.length;


  images.forEach((img) => {
    setTimeout(() => {
      img.src = "{% static 'images/progress2.png' %}";
    }, delay);
    delay += delayIncrement;
  });

  setTimeout(() => {
    var indexValue = {{ index }}
    if(window.location.href === '/test/survey/load/' && indexValue != null && indexValue != undefined){

      var dynamicUrl = "test/survey/result" + "indexValue";

      window.location.href = dynamicUrl
    }
  }, totalDuration);

}

window.onload = function() {
  if (window.location.href === '/test/survey/load/') {
    const params = new URLSearchParams(window.location.search);
    if (params.has('index')) {
      changeImages();
    }
  }
};
</script>