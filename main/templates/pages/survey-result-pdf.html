{% load static %}

<div style="position: relative;">
  <div style="display: flex; flex-direction: column; justify-content: center; align-items: center;">
    <img src="data:image/png;base64,{{ logo_img_data|safe }}" alt="bacteraify-logo">
    <h2 class="text-center">BACTERAIFY ЛАБОРАТОРИ</h2>
    <h2 class="text-center">ХАЯГ: БАЯНЗҮРХ ДҮҮРЭГ, ШИНЭ МОНГОЛ ТЕХНОЛОГИЙН ДЭЭД СУРГУУЛЬ</h2>
    <h2 class="text-center">УТАС:(+976)99172098, ВЕБ: WWW.BACTERAIFY.MN</h2>
  </div>
</div>

<div style="height: 2px; background-color: #000; margin-top: 40px; margin-bottom: 40px;"></div>

<div class="flex flex-col w-full items-start" style="margin-bottom: 40px;">
  <div id="survey_number">
    <strong>ШИНЖИЛГЭЭНИЙ ДУГААР:</strong> {{ number|safe }}
  </div>
  <div id="created_at">
    <strong>ШИНЖИЛГЭЭ ӨГСӨН ОГНОО:</strong> {{ created_at|safe }}
  </div>
  <div id="downloaded_at"></div>
</div>

<div class="flex flex-col justify-center" style="padding-right: 5px; padding-left: 5px; margin-bottom: 40px; width: 100%;">
  <table class="table table-bordered" style="border-width: 2px !important; border-color: #000;">
    <thead>
      <tr>
        <th scope="col" style="border-width: 2px;" class="text-center">#</th>
        <th scope="col" style="border-left: 0px;  border-width: 2px;" class="text-center">Бактери нэршил</th>
        {% for columns in result_data.0.keys %}
          {% if columns == 'CNN' %}
            <th scope="col" style="border-left: 0px;  border-width: 2px;" class="text-center">Илэрсэн хувь (CNN)</th>
          {% elif columns == 'SVM'  %}
            <th scope="col" style="border-left: 0px;  border-width: 2px;" class="text-center">Илэрсэн хувь (SVM)</th>
          {% elif columns == 'RNN'  %}
            <th scope="col" style="border-left: 0px;  border-width: 2px;" class="text-center">Илэрсэн хувь (RNN)</th>
          {% endif  %}
        {% endfor %}
      </tr>
    </thead>
    <tbody>
      {% for row in result_data %}
        <tr>
          <th style="border-width: 2px;" class="text-center">{{ forloop.counter }}</th>
          <td class="text-center">
            <div class="d-flex justify-content-center gap-2 align-items-center">
              {{ row.bacteria }}
              <img style="height: 45px; object-fit: contain;" src="{% static 'images/bacteria/' %}{{row.bacteria}}.png" alt="{{ row.bacteria }}">
            </div>
          </td>
          {% for columns in result_data.0.keys %}
            {% if columns == 'CNN' %}
              <td style="border-left: 0px; border-width: 2px;" class="text-center">
                {{ row.CNN }}
              </td>
            {% elif columns == 'SVM'  %}
              <td style="border-left: 0px; border-width: 2px;" class="text-center">
                {{ row.SVM }}
              </td>
            {% elif columns == 'RNN'  %}
              <td style="border-left: 0px; border-width: 2px;" class="text-center">
                {{ row.RNN }}
              </td>
            {% endif  %}
          {% endfor %}
        </tr>
      {% endfor %}
    </tbody>
  </table>
  <i class="w-full text-center">Бактери илрүүлсэн харьцаа</i>
</div>

{% for bacteria_spectrum in bacteria_images %}
<div class="flex flex-col w-full justify-center" style="margin-bottom: 20px;">
  <img style="width: 100%; height: 100%; object-fit: contain;" src="data:image/png;base64,{{ bacteria_spectrum.img_data|safe }}" alt="Bacteria Graph Image">
  <i class="w-full text-center">"{{ bacteria_spectrum.bacteria }}" бактерийн раман спектрум харьцуулалт</i>
</div>
{% endfor %}
